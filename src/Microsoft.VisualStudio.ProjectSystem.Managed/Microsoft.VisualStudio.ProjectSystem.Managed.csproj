<!-- Licensed to the .NET Foundation under one or more agreements. The .NET Foundation licenses this file to you under the MIT license. See the LICENSE.md file in the project root for more information. -->
<Project Sdk="Microsoft.NET.Sdk">

  <Import Project="..\..\build\import\HostAgnostic.props" />

  <PropertyGroup>
    <RootNamespace>Microsoft.VisualStudio</RootNamespace>
    <!-- The value of RuleInjectionClassName of XamlPropertyRule items defined by this project -->
    <XamlPropertyRuleInjectionClassName>ProjectProperties</XamlPropertyRuleInjectionClassName>
    
    <!-- Nuget -->
    <IsPackable>true</IsPackable>
    <Description>Microsoft VisualStudio ProjectSystem for Managed languages Projects</Description>
    <Summary>Microsoft VisualStudio Managed Project System</Summary>
    <PackageTags>Roslyn Managed Project System VisualStudio</PackageTags>
    <NoWarn>$(NoWarn);NU5125</NoWarn>
  </PropertyGroup>

  <ItemGroup>
    <InternalsVisibleTo Include="Microsoft.VisualStudio.ProjectSystem.Managed.VS" />
    <InternalsVisibleTo Include="Microsoft.VisualStudio.ProjectSystem.Managed.UnitTests" />
    <InternalsVisibleTo Include="Microsoft.VisualStudio.ProjectSystem.Managed.VS.UnitTests" />
    <InternalsVisibleTo Include="DynamicProxyGenAssembly2" Key="$(MoqPublicKey)" />
  </ItemGroup>

  <ItemGroup>
    <!-- Needed to break assembly conflict on StreamJsonRpc between microsoft.visualstudio.projectsystem.query and microsoft.visualstudio.languageservices -->
    <PackageReference Include="Microsoft.VisualStudio.RpcContracts" />
  </ItemGroup>

  <ItemGroup>
    <!-- Add 'DependentUpon' metadata based on file names. This causes .cs files to nest beneath .xaml files in Solution Explorer. -->
    <Compile Update="ProjectSystem\Rules\**\*.cs">
      <DependentUpon>%(Filename).xaml</DependentUpon>
    </Compile>
  </ItemGroup>
  
  <!-- Dependencies -->
  <ItemGroup>
    <!-- Analyzer Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\AnalyzerReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedAnalyzerReference.xaml" />

    <!-- Assembly Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\AssemblyReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedAssemblyReference.xaml" />

    <!-- COM Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\COMReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedCOMReference.xaml" />

    <!-- Framework Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\FrameworkReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedFrameworkReference.xaml" />

    <!-- Package Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\PackageReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\SuggestedWorkload.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedPackageReference.xaml" />

    <!-- Project Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ProjectReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedProjectReference.xaml" />

    <!-- SDK Reference -->
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\SdkReference.xaml" />
    <XamlPropertyRule Include="ProjectSystem\Rules\Dependencies\ResolvedSdkReference.xaml" />
    
    <!-- Property Pages -->
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\ApplicationPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\BuildPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\CodeAnalysisPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\ConfigurationGeneralPage.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\DebugPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\SettingsPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\ResourcesPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\ExecutableDebugPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\PackagePropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\ProjectDebugPropertyPage.xaml" />
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\PropertyPages\BuildPropertyPage.FSharp.xaml" />
  </ItemGroup>

  <!-- Items -->
  <ItemGroup>
    <XamlPropertyRule Include="ProjectSystem\Rules\Items\Compile.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\Compile.FSharp.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\Compile.BrowseObject.xaml" />

    <XamlPropertyRule Include="ProjectSystem\Rules\Items\Content.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\Content.FSharp.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\Content.BrowseObject.xaml" />

    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\EditorConfigFiles.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\EditorConfigFiles.FSharp.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\EditorConfigFiles.BrowseObject.xaml" />

    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\EmbeddedResource.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\EmbeddedResource.FSharp.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\EmbeddedResource.BrowseObject.xaml" />

    <XamlPropertyRule Include="ProjectSystem\Rules\Items\Folder.xaml" />

    <XamlPropertyRule Include="ProjectSystem\Rules\Items\None.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\None.FSharp.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRuleNoCodeBehind>
    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\Items\None.BrowseObject.xaml" />
  </ItemGroup>

  <!-- Others -->
  <ItemGroup>
    <XamlPropertyRule Include="ProjectSystem\Rules\AppDesigner.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
      <DataAccess>IRule</DataAccess>
      <RuleInjection>ProjectLevel</RuleInjection>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\CollectedFrameworkReference.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\CollectedPackageDownload.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\CollectedPackageReference.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\CollectedPackageVersion.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\CompilerCommandLineArgs.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\ConfigurationGeneral.xaml">
      <IsEmbedded>true</IsEmbedded>
      <DataAccess>IRule</DataAccess>
      <RuleInjection>ProjectLevel</RuleInjection>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <!-- TODO reconcile mismatched file names -->
    <XamlPropertyRule Include="ProjectSystem\Rules\GeneralConfiguredBrowseObject.xaml">
      <XlfInput>false</XlfInput>
      <DataAccess>IRule</DataAccess>
      <RuleInjection>ProjectLevel</RuleInjection>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\CopyUpToDateMarker.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRuleNoCodeBehind Include="ProjectSystem\Rules\DebuggerGeneral.xaml" />

    <XamlPropertyRule Include="ProjectSystem\Rules\DotNetCliToolReference.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\GeneralBrowseObject.xaml">
      <DataAccess>IRule</DataAccess>
      <RuleInjection>ProjectLevel</RuleInjection>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\LanguageService.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\NuGetRestore.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\ProjectDebugger.xaml">
      <XlfInput>false</XlfInput>
      <DataAccess>IRule</DataAccess>
      <RuleInjection>ProjectLevel</RuleInjection>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\ResolvedCompilationReference.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SourceControl.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SupportedTargetFrameworkAlias.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SupportedTargetFramework.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SupportedNETCoreAppTargetFramework.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SupportedNETStandardTargetFramework.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SupportedNETFrameworkTargetFramework.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SdkSupportedTargetPlatformIdentifier.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\SdkSupportedTargetPlatformVersion.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\UpToDateCheckBuilt.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\UpToDateCheckInput.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\WindowsFormsConfiguration.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\UpToDateCheckOutput.xaml">
      <IsEmbedded>true</IsEmbedded>
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>

    <XamlPropertyRule Include="ProjectSystem\Rules\VisualBasic.NamespaceImport.xaml">
      <XlfInput>false</XlfInput>
    </XamlPropertyRule>
  </ItemGroup>

  <ItemGroup>
    <XamlPropertyProjectItemsSchema Include="ProjectSystem\Rules\Items\ProjectItemsSchema.xaml" />
    <XamlPropertyProjectItemsSchema Include="ProjectSystem\Rules\Items\ProjectItemsSchema.CSharp.xaml" />
    <XamlPropertyProjectItemsSchema Include="ProjectSystem\Rules\Items\ProjectItemsSchema.VisualBasic.xaml" />
    <XamlPropertyProjectItemsSchema Include="ProjectSystem\Rules\Items\ProjectItemsSchema.FSharp.xaml" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <Compile Update="Resources.Designer.cs">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>Resources.resx</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <None Include="xlf\*" />
  </ItemGroup>

  <ItemGroup>
    <DesignTimeTargetsFile Include="ProjectSystem\DesignTimeTargets\*.targets" />
  </ItemGroup>

  <ItemGroup>
    <AdditionalFiles Include="PublicAPI.Shipped.txt" />
    <AdditionalFiles Include="PublicAPI.Unshipped.txt" />
  </ItemGroup>

</Project>